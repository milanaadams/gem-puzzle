(()=>{"use strict";(()=>{function e(e){return(parseInt(e,10)<10?"0":"")+e}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}var s={elements:{puzzle:null,puzzleBoard:null,blackout:null,movesCount:null,timeCounter:null,paused:null,startScreen:null,resultBoard:null,resumeSavedGame:null,burgerMenu:null,mobileMenuPopup:null,mobileBestResults:null,header:null,boardSizeBtns:[],puzzleTypeBtns:[],cards:[],moves:[],menuButtons:[],mobileButtons:[],bestResults:[]},properties:{boardSize:600,puzzleSize:4,picturePuzzle:!1,cellSize:0,movesCounter:0,currentImg:null,audio:!1,timer:!1,firstMove:!1,canDrop:!1,isAdjacent:!1},emptyCell:{top:0,left:0,element:null},timer:{hours:0,minutes:0,seconds:0},init:function(){var e=this;this.boardSize(),this.createDOM(),this.burgerMenu(),this.loadBestResults(),this.setMediaQueries(),this.elements.menuButtons=document.querySelectorAll(".btn"),this.elements.menuButtons.forEach((function(t){switch(t.textContent){case"solve puzzle":t.addEventListener("click",(function(){e.properties.timer=!1,e.solvePuzzle()}));break;case"restart game":t.addEventListener("click",(function(){e.restart()}));break;case"pause":t.addEventListener("click",(function(){e.elements.paused.classList.add("paused--active"),e.properties.timer=!1,e.elements.blackout.style.display="block"}));break;case"save game":t.addEventListener("click",(function(){e.saveGame()}));break;case"quit":t.addEventListener("click",(function(){e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.remove("board-size__btn--active"),e.properties.puzzleSize=4,e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.add("board-size__btn--active"),e.elements.startScreen.classList.add("start-screen--active"),e.resetCounters(),e.endGame()}))}}))},boardSize:function(){(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>1301&&(this.properties.boardSize=600),window.innerWidth<1301&&window.innerWidth>900&&(this.properties.boardSize=500),window.innerWidth<901&&window.innerWidth>600&&(this.properties.boardSize=400),window.innerWidth<600&&(this.properties.boardSize=280)},createDOM:function(){this.elements.puzzle=document.createElement("div"),this.elements.puzzleBoard=document.createElement("div"),this.elements.header=document.createElement("div");var t=document.createElement("div");this.elements.timeCounter=document.createElement("div"),this.elements.movesCount=document.createElement("div");var s=document.createElement("div");this.elements.resultBoard=document.createElement("div");var n=document.createElement("div"),i=document.createElement("audio");this.elements.paused=document.createElement("div"),this.elements.startScreen=document.createElement("div"),this.elements.blackout=document.createElement("div"),this.elements.burgerMenu=document.createElement("button");var r=document.createElement("span");this.elements.burgerMenu.appendChild(r),this.elements.puzzle.classList.add("puzzle"),this.elements.puzzleBoard.classList.add("puzzle-board"),this.elements.header.classList.add("header"),t.classList.add("header-logo"),this.elements.timeCounter.classList.add("time-counter"),this.elements.movesCount.classList.add("moves-counter"),s.classList.add("puzzle-wrapper"),this.elements.resultBoard.classList.add("best-results"),n.classList.add("buttons-menu"),i.classList.add("audio-twink"),this.elements.paused.className="paused",this.elements.startScreen.className="start-screen",this.elements.blackout.className="blackout",this.elements.burgerMenu.className="header__burger",this.elements.puzzleBoard.style.width="".concat(this.properties.boardSize,"px"),this.elements.puzzleBoard.style.height="".concat(this.properties.boardSize,"px"),this.elements.header.style.width="".concat(this.properties.boardSize,"px"),t.textContent="Gem Puzzle",this.elements.timeCounter.innerHTML="Time: <span>".concat(e(this.timer.hours),"</span>:<span>").concat(e(this.timer.minutes),"</span>:<span>").concat(e(this.timer.seconds),"</span>"),this.elements.movesCount.innerHTML="Moves: <span>".concat(this.properties.movesCounter,"</span>"),i.setAttribute("src","assets/tink.wav"),this.elements.paused.innerHTML="<span>Paused</span>",this.elements.header.appendChild(t),this.elements.header.appendChild(this.elements.timeCounter),this.elements.header.appendChild(this.elements.movesCount),this.elements.header.appendChild(this.elements.burgerMenu),this.elements.puzzle.appendChild(this.elements.blackout),this.elements.puzzle.appendChild(this.elements.header),this.elements.puzzle.appendChild(s),s.appendChild(this.elements.resultBoard),s.appendChild(this.elements.puzzleBoard),n.appendChild(this.createMenuButtons()),s.appendChild(n),this.elements.startScreen.appendChild(this.openStartScreen()),this.elements.paused.appendChild(this.createPausedButtons()),document.body.appendChild(this.elements.puzzle),document.body.appendChild(i),document.body.appendChild(this.elements.paused),document.body.appendChild(this.elements.startScreen)},openStartScreen:function(){var e=this;this.elements.startScreen.innerHTML="<span>New Game</span>",this.elements.startScreen.classList.add("start-screen--active"),this.elements.burgerMenu.disabled=!0;var t=document.createDocumentFragment(),s=document.createElement("ul");s.className="board-size-list",["3x3","4x4","5x5","6x6","7x7","8x8"].forEach((function(t){var n=document.createElement("button"),i=document.createElement("li");i.appendChild(n),n.setAttribute("type","button"),n.classList.add("start-screen__btn"),n.classList.add("board-size__btn"),n.textContent=t,e.elements.boardSizeBtns.push(n),s.appendChild(i)}));for(var n=function(t){e.elements.boardSizeBtns[t].addEventListener("click",(function(){e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.remove("board-size__btn--active"),e.elements.boardSizeBtns[t].classList.add("board-size__btn--active"),e.properties.puzzleSize=t+3}))},i=0;i<this.elements.boardSizeBtns.length;i+=1)n(i);this.elements.boardSizeBtns[this.properties.puzzleSize-3].classList.add("board-size__btn--active");var r=document.createElement("ul");r.className="puzzle-type-list",["Numbers","Picture"].forEach((function(t){var s=document.createElement("button"),n=document.createElement("li");n.appendChild(s),s.setAttribute("type","button"),s.classList.add("start-screen__btn"),s.classList.add("puzzle-type__btn"),s.textContent=t,"Numbers"===t&&s.classList.add("puzzle-type__btn--active"),e.elements.puzzleTypeBtns.push(s),r.appendChild(n)})),this.elements.puzzleTypeBtns.forEach((function(t){t.addEventListener("click",(function(){t===e.elements.puzzleTypeBtns[0]?(e.elements.puzzleTypeBtns[1].classList.remove("puzzle-type__btn--active"),e.properties.picturePuzzle=!1,t.classList.add("puzzle-type__btn--active")):(e.elements.puzzleTypeBtns[0].classList.remove("puzzle-type__btn--active"),e.properties.picturePuzzle=!0,t.classList.add("puzzle-type__btn--active"))}))}));var l=document.createElement("button");return l.setAttribute("type","button"),l.classList.add("start-screen__btn"),l.classList.add("play-btn"),l.textContent="Play",l.addEventListener("click",(function(){e.playGame(),e.elements.burgerMenu.disabled=!1})),this.elements.resumeSavedGame=document.createElement("button"),this.elements.resumeSavedGame.setAttribute("type","button"),this.elements.resumeSavedGame.className="resume-saved",this.elements.resumeSavedGame.textContent="Resume Saved Game",localStorage.getItem("savedGame")?(this.elements.resumeSavedGame.textContent="Resume Saved Game",this.elements.resumeSavedGame.classList.remove("resume-saved--disabled"),this.elements.resumeSavedGame.addEventListener("click",this.resumeSavedGame)):(this.elements.resumeSavedGame.textContent="No Saved Games Yet",this.elements.resumeSavedGame.classList.add("resume-saved--disabled"),this.elements.resumeSavedGame.removeEventListener("click",this.resumeSavedGame)),t.appendChild(s),t.appendChild(r),t.appendChild(l),t.appendChild(this.elements.resumeSavedGame),t},createMenuButtons:function(){var e=this,t=document.createElement("ul");return t.classList.add("buttons-menu"),["sound","restart game","save game","solve puzzle","pause","quit"].forEach((function(s){var n=document.createElement("button"),i=document.createElement("li");switch(i.appendChild(n),n.setAttribute("type","button"),n.classList.add("btn"),s){case"sound":e.properties.audio?(n.textContent="sound on",n.style.backgroundColor=""):(n.textContent="sound off",n.style.backgroundColor="grey"),n.addEventListener("click",(function(){e.properties.audio=!e.properties.audio,e.properties.audio?(n.textContent="sound on",n.style.backgroundColor=""):(n.textContent="sound off",n.style.backgroundColor="grey")}));break;default:n.textContent=s}t.appendChild(i)})),t},createPausedButtons:function(){var e=this,t=document.createElement("ul");return t.classList.add("paused-menu"),["resume","restart","save game","quit"].forEach((function(s){var n=document.createElement("button"),i=document.createElement("li");switch(i.appendChild(n),n.setAttribute("type","button"),n.classList.add("btn-paused"),s){case"resume":n.textContent=s,n.addEventListener("click",(function(){e.elements.blackout.style.display="none",e.elements.paused.classList.remove("paused--active"),e.properties.firstMove&&(e.properties.timer=!0),setTimeout((function(){e.timeCount()}),1e3)}));break;case"restart":n.textContent=s,n.addEventListener("click",(function(){e.restart(),e.elements.paused.classList.remove("paused--active")}));break;case"save game":n.textContent=s,n.addEventListener("click",(function(){e.saveGame()}));break;case"quit":n.textContent=s,n.addEventListener("click",(function(){e.elements.paused.classList.remove("paused--active"),e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.remove("board-size__btn--active"),e.properties.puzzleSize=4,e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.add("board-size__btn--active"),e.elements.startScreen.classList.add("start-screen--active"),e.resetCounters(),e.endGame()}));break;default:n.textContent=s}t.appendChild(i)})),t},createCells:function(){var e=this,t=document.createDocumentFragment(),s=["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg","7.jpg","8.jpg","9.jpg","10.jpg"];this.properties.currentImg||(this.properties.currentImg=Math.floor(10*Math.random()));for(var n=Math.pow(this.properties.puzzleSize,2)-1,i=function(n){var i=document.createElement("div");i.className="puzzle-cell",e.properties.cellSize=e.properties.boardSize/e.properties.puzzleSize,i.setAttribute("draggable","true");var r=n%e.properties.puzzleSize,l=(n-r)/e.properties.puzzleSize;!1===e.properties.picturePuzzle?(i.innerHTML=n+1,i.style.width="".concat(e.properties.cellSize-10,"px"),i.style.height="".concat(e.properties.cellSize-10,"px")):!0===e.properties.picturePuzzle&&(i.style.width="".concat(e.properties.cellSize-5,"px"),i.style.height="".concat(e.properties.cellSize-5,"px"),i.style.margin="2px",i.style.backgroundImage='url("assets/'.concat(s[e.properties.currentImg],'")'),i.style.backgroundSize="".concat(e.properties.boardSize,"px ").concat(e.properties.boardSize,"px"),i.style.backgroundPositionX="-".concat(r*e.properties.cellSize,"px"),i.style.backgroundPositionY="-".concat(l*e.properties.cellSize,"px")),e.elements.cards.push({left:r,top:l,startLeft:r,startTop:l,element:i,value:n+1}),i.style.left="".concat(r*e.properties.cellSize,"px"),i.style.top="".concat(l*e.properties.cellSize,"px"),i.addEventListener("click",(function(){e.moveCell(n),e.playAudio(),e.isFinished(),e.properties.timer||(e.properties.timer=!0,setTimeout((function(){e.timeCount()}),1e3))})),i.addEventListener("dragstart",(function(){return e.dragStart(n)})),i.addEventListener("dragover",e.dragOver),i.addEventListener("dragend",(function(){return e.dragEnd(n)})),t.appendChild(i)},r=0;r<n;r+=1)i(r);return this.createEmptyCell(),t.appendChild(this.emptyCell.element),t},createEmptyCell:function(){var e=Math.pow(this.properties.puzzleSize,2)-1;this.emptyCell.top=e%this.properties.puzzleSize,this.emptyCell.left=e%this.properties.puzzleSize,this.emptyCell.element=document.createElement("div"),this.emptyCell.element.classList.add("empty-cell"),this.emptyCell.element.style.width="".concat(this.properties.cellSize-10,"px"),this.emptyCell.element.style.height="".concat(this.properties.cellSize-10,"px"),this.emptyCell.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),this.emptyCell.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px"),this.emptyCell.element.addEventListener("dragover",this.dragOver),this.emptyCell.element.addEventListener("dragenter",this.dragEnter),this.emptyCell.element.addEventListener("dragleave",this.dragLeave),this.emptyCell.element.addEventListener("drop",this.drop)},moveCell:function(e){var t=this.elements.cards[e];if(!(Math.abs(this.emptyCell.left-t.left)+Math.abs(this.emptyCell.top-t.top)>1)){t.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),t.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px");var s=this.emptyCell.left,n=this.emptyCell.top;this.elements.moves.push([this.emptyCell.left,this.emptyCell.top]),this.emptyCell.left=t.left,this.emptyCell.top=t.top,this.elements.cards[e].left=s,this.elements.cards[e].top=n,this.emptyCell.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),this.emptyCell.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px"),this.properties.movesCounter+=1,this.elements.movesCount.innerHTML="Moves: <span>".concat(this.properties.movesCounter,"</span>"),this.properties.firstMove||(this.properties.firstMove=!0)}},dragStart:function(e){var t=this.elements.cards[e];setTimeout((function(){return t.element.classList.add("invisible")}),0),Math.abs(this.emptyCell.left-t.left)+Math.abs(this.emptyCell.top-t.top)<=1&&(this.properties.isAdjacent=!0)},dragEnd:function(e){var t=this,s=this.elements.cards[e];if(this.properties.canDrop&&this.properties.isAdjacent){s.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),s.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px");var n=this.emptyCell.left,i=this.emptyCell.top;this.elements.moves.push([this.emptyCell.left,this.emptyCell.top]),this.emptyCell.left=s.left,this.emptyCell.top=s.top,this.elements.cards[e].left=n,this.elements.cards[e].top=i,this.emptyCell.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),this.emptyCell.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px"),this.properties.movesCounter+=1,this.elements.movesCount.innerHTML="Moves: <span>".concat(this.properties.movesCounter,"</span>"),this.properties.firstMove||(this.properties.firstMove=!0,this.properties.timer=!0,setTimeout((function(){t.timeCount()}),1e3))}s.element.classList.remove("invisible"),this.properties.isAdjacent=!1,this.properties.canDrop=!1,this.isFinished()},dragOver:function(e){e.preventDefault()},dragEnter:function(){s.properties.canDrop=!0},dragLeave:function(){s.properties.canDrop=!1},mixCards:function(){this.elements.moves=[];var e=0,t=0;switch(this.properties.puzzleSize){case 3:e=30,t=60;break;case 4:e=50,t=130;break;case 5:e=80,t=210;break;case 6:e=100,t=250;break;case 7:e=150,t=270;break;default:e=200,t=400}for(var s=Math.ceil(Math.random()*(t-e)+e),n=0;n<s;n+=1){var i=[[0,1],[0,-1],[1,0],[-1,0]],r=Math.floor(4*Math.random()),l=parseInt(i[r][0],10)+parseInt(this.emptyCell.left,10),o=parseInt(i[r][1],10)+parseInt(this.emptyCell.top,10);if(l<this.properties.puzzleSize&&l>-1&&o<this.properties.puzzleSize&&o>-1)for(var a=0;a<this.elements.cards.length;a+=1)if(this.elements.cards[a].left===l&&this.elements.cards[a].top===o){var p=this.elements.cards[a];this.elements.cards[a].left=this.emptyCell.left,this.elements.cards[a].top=this.emptyCell.top,this.elements.moves.push([this.emptyCell.left,this.emptyCell.top]),this.emptyCell.left=l,this.emptyCell.top=o,p.element.style.left="".concat(p.left*this.properties.cellSize,"px"),p.element.style.top="".concat(p.top*this.properties.cellSize,"px"),this.emptyCell.element.style.left="".concat(this.emptyCell.left*this.properties.cellSize,"px"),this.emptyCell.element.style.top="".concat(this.emptyCell.top*this.properties.cellSize,"px")}}},refactorMoves:function(){if(this.elements.moves.length>2)for(var e=this.elements.moves.length-1,t=this.elements.moves.length-3;t>=0;)this.elements.moves[e][0]===this.elements.moves[t][0]&&this.elements.moves[e][1]===this.elements.moves[t][1]?(this.elements.moves.splice(t-1,2),e-=2,t-=2):(e-=1,t-=1)},isFinished:function(){var e=this;this.elements.cards.every((function(t){var s=t,n=s.top*e.properties.puzzleSize+s.left+1;return s.value===n}))&&(this.properties.timer=!1,this.properties.firstMove=!1,this.setBestResults(),setTimeout((function(){e.createYouWinMsg()}),1e3))},createYouWinMsg:function(){for(var t=this;this.elements.resultBoard.children.length>0;)this.elements.resultBoard.children[0].remove();var s=document.createElement("div"),n=document.createElement("div"),i=document.createElement("p");s.className="you-win-popup",n.className="you-win-popup__wrapper",i.className="you-win-popup__message",i.innerHTML="<span>You Win!</span> You solved the puzzle in:<br> ".concat(e(this.timer.hours),":").concat(e(this.timer.minutes),":").concat(e(this.timer.seconds)," and ").concat(this.properties.movesCounter," steps."),n.appendChild(i),["play again","quit"].forEach((function(e){var i=document.createElement("button");switch(i.className="you-win-popup__btn",i.classList.add("btn-paused"),i.textContent=e,e){case"quit":i.addEventListener("click",(function(){document.body.removeChild(s),t.elements.boardSizeBtns[t.properties.puzzleSize-3].classList.remove("board-size__btn--active"),t.properties.puzzleSize=4,t.elements.boardSizeBtns[t.properties.puzzleSize-3].classList.add("board-size__btn--active"),t.elements.startScreen.classList.add("start-screen--active"),t.resetCounters(),t.endGame()}));break;case"play again":i.addEventListener("click",(function(){document.body.removeChild(s),t.restart()}));break;default:i.textContent=e}return n.appendChild(i)})),s.appendChild(n),document.body.appendChild(s),this.properties.timer=!1,this.loadBestResults()},setBestResults:function(){var t=this.properties.movesCounter,s=this.timer.hours,n=this.timer.minutes,i=this.timer.seconds+1,r=[t,"".concat(e(s),":").concat(e(n),":").concat(e(i)),60*s+60*n+60*i];if(this.elements.bestResults.length<10)this.elements.bestResults.push(r);else{for(var l=parseInt(this.elements.bestResults[0][0],10),o=0;o<this.elements.bestResults.length;o+=1){var a=parseInt(this.elements.bestResults[o][0],10);a>l&&(l=a)}t<l&&this.elements.bestResults.splice(9,1,r)}var p=this.elements.bestResults.join("|");localStorage.setItem("bestResults",p)},loadBestResults:function(){if(this.elements.resultBoard.innerHTML="Your 10 best results",localStorage.getItem("bestResults")){var e=localStorage.getItem("bestResults").split("|").map((function(e){return e.split(",")})).sort((function(e,t){return parseInt(e[0],10)>parseInt(t[0],10)?1:-1}));this.elements.bestResults=e;var t=document.createElement("ul");t.className="result-list";for(var s=0;s<this.elements.bestResults.length;s+=1){var n=document.createElement("li"),i="".concat(s+1,". Steps: ").concat(this.elements.bestResults[s][0]," / Time: ").concat(this.elements.bestResults[s][1]);n.textContent=i,t.appendChild(n)}this.elements.resultBoard.appendChild(t)}},solvePuzzle:function(){var e=this;if(this.elements.moves.length>0){this.elements.menuButtons.forEach((function(e){"quit"!==e.textContent&&(e.disabled=!0)}));for(var t=this.elements.moves.pop(),s=t[0],n=t[1],i=0;i<this.elements.cards.length;i+=1){var r=this.elements.cards[i];r.left===s&&r.top===n&&(r.left=this.emptyCell.left,r.top=this.emptyCell.top,r.element.style.left="".concat(r.left*this.properties.cellSize,"px"),r.element.style.top="".concat(r.top*this.properties.cellSize,"px"),this.emptyCell.left=s,this.emptyCell.top=n)}setTimeout((function(){e.solvePuzzle()}),300)}else this.elements.menuButtons.forEach((function(e){e.disabled=!1})),this.elements.blackout.style.display="block",setTimeout((function(){e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.remove("board-size__btn--active"),e.properties.puzzleSize=4,e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.add("board-size__btn--active"),e.elements.startScreen.classList.add("start-screen--active"),e.resetCounters(),e.endGame()}),2e3)},playGame:function(){"start-screen__btn puzzle-type__btn puzzle-type__btn--active"===this.elements.puzzleTypeBtns[0].className?this.properties.picturePuzzle=!1:this.properties.picturePuzzle=!0,this.elements.puzzleBoard.appendChild(this.createCells()),this.mixCards(),this.elements.startScreen.classList.remove("start-screen--active"),this.elements.blackout.style.display="none"},playAudio:function(){this.properties.audio&&document.querySelector(".audio-twink").play()},timeCount:function(){var t=this;!function s(){t.properties.timer&&(t.timer.seconds+=1,t.timer.seconds/60==1&&(t.timer.seconds=0,t.timer.minutes+=1,t.timer.minutes/60==1&&(t.timer.minutes=0,t.timer.hours+=1)),t.elements.timeCounter.innerHTML="Time: <span>".concat(e(t.timer.hours),"</span>:<span>").concat(e(t.timer.minutes),"</span>:<span>").concat(e(t.timer.seconds),"</span>"),setTimeout(s,1e3))}()},endGame:function(){for(this.elements.moves=[],this.elements.cards=[];this.elements.puzzleBoard.children.length>0;)this.elements.puzzleBoard.children[0].remove();this.emptyCell.top=0,this.emptyCell.left=0,this.emptyCell.element=null,this.properties.firstMove=!1,this.properties.currentImg=null,this.elements.blackout.style.display="block",this.elements.resumeSavedGame.removeEventListener("click",this.resumeSavedGame),localStorage.getItem("savedGame")?(this.elements.resumeSavedGame.textContent="Resume Saved Game",this.elements.resumeSavedGame.classList.remove("resume-saved--disabled"),this.elements.resumeSavedGame.addEventListener("click",this.resumeSavedGame)):(this.elements.resumeSavedGame.removeEventListener("click",this.resumeSavedGame),this.elements.resumeSavedGame.textContent="No Saved Games Yet",this.elements.resumeSavedGame.classList.add("resume-saved--disabled"))},restart:function(){var e=this;this.endGame(),setTimeout((function(){e.elements.puzzleBoard.appendChild(e.createCells())}),0),this.elements.blackout.style.display="none",this.resetCounters(),setTimeout((function(){e.mixCards()}),200)},resetCounters:function(){this.properties.timer=!1,this.timer.hours=0,this.timer.minutes=0,this.timer.seconds=0,this.elements.timeCounter.innerHTML="Time: <span>".concat(e(this.timer.hours),"</span>:<span>").concat(e(this.timer.minutes),"</span>:<span>").concat(e(this.timer.seconds),"</span>"),this.properties.movesCounter=0,this.elements.movesCount.innerHTML="Moves: <span>".concat(this.properties.movesCounter,"</span>")},saveGame:function(){localStorage.removeItem("savedGame");var e=this.properties.puzzleSize,t=this.properties.picturePuzzle,s=this.timer.hours,n=this.timer.minutes,i=this.timer.seconds,r=this.emptyCell.left,l=this.emptyCell.top,o=this.properties.movesCounter,a=this.properties.currentImg,p="";this.elements.moves.forEach((function(e){p+="".concat(e,"/")}));var c="".concat(e,"|").concat(t,"|").concat(s,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(l,"|").concat(o,"|").concat(p,"|").concat(a);localStorage.setItem("savedGame",c);var m=document.createElement("div");m.className="saved-game-popup";var d=document.createElement("p");d.className="saved-game-popup__message",d.textContent="Your current game was saved!";var u=document.createElement("button");u.className="saved-game-popup__btn",u.classList.add("btn"),u.textContent="Close",m.appendChild(d),m.appendChild(u),document.body.appendChild(m),u.addEventListener("click",(function(){document.body.removeChild(m)}))},loadSavedGame:function(){var n,i,r=this,l=(n=localStorage.getItem("savedGame").split("|"),i=10,function(e){if(Array.isArray(e))return e}(n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var s=[],n=!0,i=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(s.push(l.value),!t||s.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return s}}(n,i)||function(e,s){if(e){if("string"==typeof e)return t(e,s);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,s):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=l[0],a=l[1],p=l[2],c=l[3],m=l[4],d=l[5],u=l[6],h=l[7],z=l[8],v=l[9],b="false"===a?0:1;this.properties.puzzleSize=parseInt(o,10),this.properties.picturePuzzle=Boolean(b),this.timer.hours=parseInt(p,10),this.timer.minutes=parseInt(c,10),this.timer.seconds=parseInt(m,10),this.properties.movesCounter=parseInt(h,10),this.properties.currentImg=parseInt(v,10),s.elements.puzzleBoard.appendChild(s.createCells());var y=z.split("/");y.pop();var f=[];y.forEach((function(e){var t=e.split(",").map((function(e){return parseInt(e,10)}));f.push(t)}));var C=[];C.push(parseInt(d,10)),C.push(parseInt(u,10)),f.push(C),f.forEach((function(e){for(var t=e[0],s=e[1],n=0;n<r.elements.cards.length;n+=1){var i=r.elements.cards[n];i.left===t&&i.top===s&&(i.left=r.emptyCell.left,i.top=r.emptyCell.top,i.element.style.left="".concat(i.left*r.properties.cellSize,"px"),i.element.style.top="".concat(i.top*r.properties.cellSize,"px"),r.emptyCell.left=t,r.emptyCell.top=s)}})),this.elements.movesCount.innerHTML="Moves: <span>".concat(this.properties.movesCounter,"</span>"),this.elements.timeCounter.innerHTML="Time: <span>".concat(e(this.timer.hours),"</span>:<span>").concat(e(this.timer.minutes),"</span>:<span>").concat(e(this.timer.seconds),"</span>"),f.forEach((function(e){return r.elements.moves.push(e)}))},resumeSavedGame:function(){s.loadSavedGame(),s.elements.startScreen.classList.remove("start-screen--active"),s.elements.blackout.style.display="none"},burgerMenu:function(){var e=this;this.elements.burgerMenu.addEventListener("click",(function(){"header__burger active"===e.elements.burgerMenu.className?(e.elements.burgerMenu.classList.remove("active"),e.elements.blackout.style.display="none",document.body.removeChild(e.elements.mobileMenuPopup)):(e.elements.burgerMenu.classList.add("active"),e.elements.blackout.style.display="block",e.properties.timer=!1,e.createMobileMenu())}))},createMobileMenu:function(){var e=this;this.elements.mobileMenuPopup=document.createElement("div"),this.elements.mobileMenuPopup.className="mobile-menu-popup";var t=document.createElement("p");t.className="mobile-menu__header",t.textContent="Menu",this.elements.mobileMenuPopup.appendChild(t);var s=document.createElement("ul");s.classList.add("mobile-menu"),["sound","resume","restart","save game","solve puzzle","best results","quit"].forEach((function(t){var n=document.createElement("button"),i=document.createElement("li");switch(i.appendChild(n),n.setAttribute("type","button"),n.classList.add("mobile-menu__btn"),t){case"sound":e.properties.audio?(n.textContent="sound on",n.style.backgroundColor=""):(n.textContent="sound off",n.style.backgroundColor="grey"),n.addEventListener("click",(function(){e.properties.audio=!e.properties.audio,e.properties.audio?(n.textContent="sound on",n.style.backgroundColor=""):(n.textContent="sound off",n.style.backgroundColor="grey")}));break;case"resume":n.textContent=t,n.addEventListener("click",(function(){e.properties.firstMove&&(e.properties.timer=!0),document.body.removeChild(e.elements.mobileMenuPopup),e.elements.burgerMenu.classList.remove("active"),e.elements.blackout.style.display="none",setTimeout((function(){e.timeCount()}),1e3)}));break;case"restart":n.textContent=t,n.addEventListener("click",(function(){e.restart(),document.body.removeChild(e.elements.mobileMenuPopup),e.elements.burgerMenu.classList.remove("active"),e.elements.blackout.style.display="none"}));break;case"save game":n.textContent=t,n.addEventListener("click",(function(){e.saveGame()}));break;case"solve puzzle":n.textContent=t,n.addEventListener("click",(function(){e.properties.timer=!1,e.solvePuzzle(),document.body.removeChild(e.elements.mobileMenuPopup),e.elements.burgerMenu.classList.remove("active"),e.elements.blackout.style.display="none"}));break;case"best results":n.textContent=t,n.addEventListener("click",(function(){e.loadBestResultsMobile()}));break;case"quit":n.textContent=t,n.addEventListener("click",(function(){e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.remove("board-size__btn--active"),e.properties.puzzleSize=4,e.elements.boardSizeBtns[e.properties.puzzleSize-3].classList.add("board-size__btn--active"),e.elements.startScreen.classList.add("start-screen--active"),e.resetCounters(),e.endGame(),document.body.removeChild(e.elements.mobileMenuPopup),e.elements.burgerMenu.classList.remove("active"),e.elements.blackout.style.display="none"}));break;default:n.textContent=t}s.appendChild(i)})),this.elements.mobileMenuPopup.appendChild(s),document.body.appendChild(this.elements.mobileMenuPopup)},loadBestResultsMobile:function(){var e=this;this.elements.mobileBestResults=document.createElement("div"),this.elements.mobileBestResults.className="mobile-best-results";var t=document.createElement("p");if(t.className="mobile-menu__header",t.textContent="Best results",this.elements.mobileBestResults.appendChild(t),localStorage.getItem("bestResults")){var s=localStorage.getItem("bestResults").split("|").map((function(e){return e.split(",")})).sort((function(e,t){return parseInt(e[0],10)>parseInt(t[0],10)?1:-1}));this.elements.bestResults=s;var n=document.createElement("ul");n.className="mobile-result-list";for(var i=0;i<this.elements.bestResults.length;i+=1){var r=document.createElement("li"),l="".concat(i+1,". Steps: ").concat(this.elements.bestResults[i][0]," / Time: ").concat(this.elements.bestResults[i][1]);r.textContent=l,n.appendChild(r)}this.elements.mobileBestResults.appendChild(n)}var o=document.createElement("button");o.setAttribute("type","button"),o.className="mobile-menu__btn",o.textContent="Close",o.addEventListener("click",(function(){document.body.removeChild(e.elements.mobileBestResults)})),this.elements.mobileBestResults.appendChild(o),document.body.appendChild(this.elements.mobileBestResults)},setMediaQueries:function(){var e=this;window.addEventListener("resize",(function(){window.innerWidth>1300?(s.properties.boardSize=600,e.properties.cellSize=e.properties.boardSize/e.properties.puzzleSize,s.elements.puzzleBoard.style.width="".concat(e.properties.boardSize,"px"),s.elements.puzzleBoard.style.height="".concat(e.properties.boardSize,"px"),e.elements.header.style.width="".concat(e.properties.boardSize,"px"),e.elements.cards.forEach((function(t){var s=t;!1===e.properties.picturePuzzle?(s.element.style.width="".concat(e.properties.cellSize-10,"px"),s.element.style.height="".concat(e.properties.cellSize-10,"px")):!0===e.properties.picturePuzzle&&(s.element.style.width="".concat(e.properties.cellSize-5,"px"),s.element.style.height="".concat(e.properties.cellSize-5,"px"),s.element.style.margin="2px",s.element.style.backgroundSize="".concat(e.properties.boardSize,"px ").concat(e.properties.boardSize,"px"),s.element.style.backgroundPositionX="-".concat(s.startLeft*e.properties.cellSize,"px"),s.element.style.backgroundPositionY="-".concat(s.startTop*e.properties.cellSize,"px")),s.element.style.left="".concat(s.left*e.properties.cellSize,"px"),s.element.style.top="".concat(s.top*e.properties.cellSize,"px")}))):window.innerWidth<1301&&window.innerWidth>900?(s.properties.boardSize=500,e.properties.cellSize=e.properties.boardSize/e.properties.puzzleSize,s.elements.puzzleBoard.style.width="".concat(e.properties.boardSize,"px"),s.elements.puzzleBoard.style.height="".concat(e.properties.boardSize,"px"),e.elements.header.style.width="".concat(e.properties.boardSize,"px"),e.elements.cards.forEach((function(t){var s=t;!1===e.properties.picturePuzzle?(s.element.style.width="".concat(e.properties.cellSize-10,"px"),s.element.style.height="".concat(e.properties.cellSize-10,"px")):!0===e.properties.picturePuzzle&&(s.element.style.width="".concat(e.properties.cellSize-5,"px"),s.element.style.height="".concat(e.properties.cellSize-5,"px"),s.element.style.margin="2px",s.element.style.backgroundSize="".concat(e.properties.boardSize,"px ").concat(e.properties.boardSize,"px"),s.element.style.backgroundPositionX="-".concat(s.startLeft*e.properties.cellSize,"px"),s.element.style.backgroundPositionY="-".concat(s.startTop*e.properties.cellSize,"px")),s.element.style.left="".concat(s.left*e.properties.cellSize,"px"),s.element.style.top="".concat(s.top*e.properties.cellSize,"px")}))):window.innerWidth<901&&window.innerWidth>600?(s.properties.boardSize=400,e.properties.cellSize=e.properties.boardSize/e.properties.puzzleSize,s.elements.puzzleBoard.style.width="".concat(e.properties.boardSize,"px"),s.elements.puzzleBoard.style.height="".concat(e.properties.boardSize,"px"),e.elements.header.style.width="".concat(e.properties.boardSize,"px"),e.elements.cards.forEach((function(t){var s=t;!1===e.properties.picturePuzzle?(s.element.style.width="".concat(e.properties.cellSize-10,"px"),s.element.style.height="".concat(e.properties.cellSize-10,"px")):!0===e.properties.picturePuzzle&&(s.element.style.width="".concat(e.properties.cellSize-5,"px"),s.element.style.height="".concat(e.properties.cellSize-5,"px"),s.element.style.margin="2px",s.element.style.backgroundSize="".concat(e.properties.boardSize,"px ").concat(e.properties.boardSize,"px"),s.element.style.backgroundPositionX="-".concat(s.startLeft*e.properties.cellSize,"px"),s.element.style.backgroundPositionY="-".concat(s.startTop*e.properties.cellSize,"px")),s.element.style.left="".concat(s.left*e.properties.cellSize,"px"),s.element.style.top="".concat(s.top*e.properties.cellSize,"px")}))):(s.properties.boardSize=280,e.properties.cellSize=e.properties.boardSize/e.properties.puzzleSize,s.elements.puzzleBoard.style.width="".concat(e.properties.boardSize,"px"),s.elements.puzzleBoard.style.height="".concat(e.properties.boardSize,"px"),e.elements.header.style.width="".concat(e.properties.boardSize,"px"),e.elements.cards.forEach((function(t){var s=t;!1===e.properties.picturePuzzle?(s.element.style.width="".concat(e.properties.cellSize-5,"px"),s.element.style.height="".concat(e.properties.cellSize-5,"px")):!0===e.properties.picturePuzzle&&(s.element.style.width="".concat(e.properties.cellSize-3,"px"),s.element.style.height="".concat(e.properties.cellSize-3,"px"),s.element.style.margin="2px",s.element.style.backgroundSize="".concat(e.properties.boardSize,"px ").concat(e.properties.boardSize,"px"),s.element.style.backgroundPositionX="-".concat(s.startLeft*e.properties.cellSize,"px"),s.element.style.backgroundPositionY="-".concat(s.startTop*e.properties.cellSize,"px")),s.element.style.left="".concat(s.left*e.properties.cellSize,"px"),s.element.style.top="".concat(s.top*e.properties.cellSize,"px")})))}))}};window.addEventListener("DOMContentLoaded",(function(){s.init()}))})()})();
//# sourceMappingURL=script.js.map